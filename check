1. Install and Configure PostgreSQL Database
Step 1 — Install PostgreSQL
sudo apt install -y postgresql postgresql-common


Installs PostgreSQL database server required by SonarQube to store analysis results.

Step 2 — Enable PostgreSQL at boot
sudo systemctl enable postgresql


Ensures database automatically starts when system boots.

Step 3 — Start PostgreSQL service
sudo systemctl start postgresql


Starts the PostgreSQL server immediately.

Step 4 — Login as postgres user
sudo -u postgres psql


Opens PostgreSQL command shell to create database and user.

Step 5 — Create SonarQube database user
CREATE ROLE sonaruser WITH LOGIN ENCRYPTED PASSWORD 'your_password';


Creates a dedicated user for SonarQube database connection.

Step 6 — Create SonarQube database
CREATE DATABASE sonarqube;


Creates database where SonarQube stores reports and issues.

Step 7 — Grant database privileges
GRANT ALL PRIVILEGES ON DATABASE sonarqube TO sonaruser;


Allows SonarQube user full access to database.

Step 8 — Grant schema permissions
\c sonarqube
GRANT ALL PRIVILEGES ON SCHEMA public TO sonaruser;


Allows user to create tables inside the database.

Step 9 — Exit PostgreSQL
\q

2. Install SonarQube
Step 10 — Update packages
sudo apt update


Refreshes Ubuntu package list.

Step 11 — Install Java (Required Runtime)
sudo apt install openjdk-17-jdk -y


SonarQube runs on Java.

Step 12 — Install unzip utility
sudo apt install unzip -y


Used to extract SonarQube archive.

Step 13 — Verify Java
java -version


Checks Java installation.

Step 14 — Download SonarQube
wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-25.2.0.102705.zip


Downloads latest SonarQube server package.

Step 15 — Extract package
unzip sonarqube-25.2.0.102705.zip

Step 16 — Move to /opt directory
sudo mv sonarqube-25.2.0.102705 /opt/sonarqube


Places software in system application directory.

Step 17 — Create SonarQube user
sudo adduser --system --no-create-home --group --disabled-login sonarqube


Creates secure service account to run SonarQube.

Step 18 — Give permissions
sudo chown -R sonarqube:sonarqube /opt/sonarqube


Allows SonarQube user to access files.

3. Install SonarScanner CLI
Step 19 — Download Scanner
wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-7.0.1.4817-linux-x64.zip

Step 20 — Extract
unzip sonar-scanner-cli-7.0.1.4817-linux-x64.zip

Step 21 — Move directory
sudo mv sonar-scanner-7.0.1.4817-linux-x64 /opt/sonarscanner

Step 22 — Configure server URL
sudo nano /opt/sonarscanner/conf/sonar-scanner.properties


Change:

sonar.host.url=127.0.0.1


Sets local SonarQube server address.

Step 23 — Make executable
sudo chmod +x /opt/sonarscanner/bin/sonar-scanner

Step 24 — Create global command
sudo ln -s /opt/sonarscanner/bin/sonar-scanner /usr/local/bin/sonar-scanner

Step 25 — Verify installation
sonar-scanner -v

4. Configure SonarQube
Step 26 — Edit configuration file
sudo nano /opt/sonarqube/conf/sonar.properties


Add:

sonar.jdbc.username=sonaruser
sonar.jdbc.password=your_password
sonar.jdbc.url=jdbc:postgresql://localhost:5432/sonarqube
sonar.web.host=0.0.0.0
sonar.web.port=9000


Connects SonarQube to database.

Step 27 — Increase system limits
sudo nano /etc/sysctl.conf


Add:

vm.max_map_count=524288
fs.file-max=131072


Apply:

sudo sysctl -p

Step 28 — Configure user limits
sudo nano /etc/security/limits.d/99-sonarqube.conf


Add:

sonarqube - nofile 131072
sonarqube - nproc 8192

Step 29 — Allow firewall port
sudo ufw allow 9000/tcp
sudo ufw reload


Allows browser access to SonarQube UI.

5. Create System Service
Step 30 — Create service file
sudo nano /etc/systemd/system/sonarqube.service


Add:

[Install]
WantedBy=multi-user.target

Step 31 — Reload systemd
sudo systemctl daemon-reload

Step 32 — Enable service
sudo systemctl enable sonarqube

Step 33 — Start SonarQube
sudo systemctl start sonarqube

Step 34 — Check status
sudo systemctl status sonarqube


Verifies SonarQube is running.
